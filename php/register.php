<?php
$id = $_POST['id']; $tel = $_POST['tel']; $chk = $_POST['chk']; $pw = $_POST['pw']; $repw = $_POST['repw']; $conn = mysqli_connect('localhost','root','root','pinyougou'); $sql = "SELECT * FROM `user` WHERE `tel`='$tel'"; $result = mysqli_query($conn,$sql); $data = mysqli_fetch_assoc($result); if ($data) { $arr = array('code'=>0,'msg'=>'用户名已被注册'); }else{ $sql = "INSERT INTO `user` (`id`,`tel`,`chk`,`pw`,`repw`) VALUES ('$id','$tel','$chk','$pw','$repw')"; $result = mysqli_query($conn,$sql); if ($result) { $arr = array('code'=>1,'data'=>array('tel'=>$tel)); }else { $arr = array('code'=>0,'msg'=>'后端出错了'); } } echo json_encode($arr); ?>